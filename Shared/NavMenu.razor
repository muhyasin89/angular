@inject ILocalStorageService LocalStorage

@inject AuthenticationStateProvider AuthStateProvider

<MudNavMenu>
    <MudNavLink Href="/" Match="NavLinkMatch.All">Dashboard</MudNavLink>
    <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">Counter</MudNavLink>
    <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
    <MudNavGroup Title="Settings" Expanded="true">
        <MudNavLink Href="/users"  Match="NavLinkMatch.Prefix">Users</MudNavLink>
        <MudNavLink Href="/calendar"  Match="NavLinkMatch.Prefix">Calendar</MudNavLink>
    </MudNavGroup>
    <AuthorizeView>
        <NotAuthorized>
            <MudNavLink Href="/login" Match="NavLinkMatch.Prefix">Login</MudNavLink>
        </NotAuthorized>
        <Authorized>
            <MudNavLink @onclick="Logout">Logout</MudNavLink>
        
        </Authorized>
      
    </AuthorizeView>
  
</MudNavMenu>

@code{
    private async void Logout(){
        Console.WriteLine("logout");
        await LocalStorage.RemoveItemAsync("username");
        await AuthStateProvider.GetAuthenticationStateAsync();
    }
}