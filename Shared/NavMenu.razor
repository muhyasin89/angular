@inject ILocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthStateProvider

<MudNavMenu>
     <AuthorizeView>
        <Authorized>
            <MudNavLink Href="/" Match="NavLinkMatch.All">Dashboard</MudNavLink>
            <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix">Counter</MudNavLink>
            <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix">Fetch Data</MudNavLink>
            <MudNavGroup Title="Settings" Expanded="true">
                <MudNavLink Href="/users"  Match="NavLinkMatch.Prefix">Users</MudNavLink>
                <MudNavLink Href="/security"  Match="NavLinkMatch.Prefix">Security</MudNavLink>
            </MudNavGroup>
             <MudNavLink @onclick="Logout">Logout</MudNavLink>
        </Authorized>

    <NotAuthorized>
        <MudNavLink Href="/login" Match="NavLinkMatch.Prefix">Login</MudNavLink>
    </NotAuthorized>
    
           
    </AuthorizeView>
  
</MudNavMenu>

@code{
    private async void Logout(){
        Console.WriteLine("logout");
        await LocalStorage.RemoveItemAsync("username");
        await AuthStateProvider.GetAuthenticationStateAsync();
    }
}